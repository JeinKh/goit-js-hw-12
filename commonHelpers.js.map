{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nexport { getPosts }\n//----------------------------------\n\nasync function getPosts(searchQuery, page = 1, perPage = 15) {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const API_KEY = '44085737-801aedd726c9c1496368a8656';\n    // const params = new URLSearchParams({\n    // key: '44085737-801aedd726c9c1496368a8656',\n    // q: imageName,\n    // image_type: 'photo',\n    // orientation: 'horizontal',\n    // safesearch: true\n    // })\n\n    const url = `${BASE_URL}`;\n\n    try {\n        const response = await axios(url, {\n            params: {\n                key: API_KEY,\n                q: searchQuery,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                page: page,\n                per_page: perPage\n            }\n        });\n        return response.data;\n    } catch (error) {\n        iziToast.error({\n            title: \"Error\",\n            message: `Something went wrong. ${error.message}`\n        })\n    }\n\n};","\n//----------------------------------\n\nfunction createMarkup({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) {\n    return `\n    <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n        <ul class=\"info\">\n        <li class=\"info-item\"> <h3 class=\"info-title\">Likes</h3><p class=\"info-text\">${likes}</p></li>\n        <li class=\"info-item\"> <h3 class=\"info-title\">Views</h3><p class=\"info-text\">${views}</p></li>\n        <li class=\"info-item\"> <h3 class=\"info-title\">Comments</h3><p class=\"info-text\">${comments}</p></li>\n        <li class=\"info-item\"> <h3 class=\"info-title\">Downloads</h3><p class=\"info-text\">${downloads}</p></li>\n        </ul>\n        </a>\n    </li>\n    `;\n}\n\n export function postsTemplate(arr) {\n    return arr.map(createMarkup).join('');\n }","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\"\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n//------------------Simple Light box----------------\n\nconst lightbox = new SimpleLightbox(\".gallery a\", { captionDelay: 250, captionsData: \"alt\" });\n\nimport { getPosts } from \"./js/pixabay-api\";\nimport { postsTemplate } from \"./js/render-functions\";\n\nconst selectors = {\nform: document.querySelector('#search-form'),\ninput: document.querySelector('#search-input'),\nloader: document.querySelector('.loader'),\npostsGallery: document.querySelector('.gallery'),\nloadMoreBtn: document.querySelector('#load-more-btn'),\n};\n\nselectors.loader.classList.add(\"hidden\");\nselectors.loadMoreBtn.classList.add(\"hidden\");\n\nlet page = 1;\nlet totalHits = 0;\nlet query = \"\";\n\n\nasync function handleSubmit(event) {\n\n    event.preventDefault();\n    selectors.postsGallery.innerHTML = \"\";\n    page = 1;\n\n    query = event.target.elements.searchQuery.value.trim();\n\n    if (!query) {\n        iziToast.info({\n            title: \"No data\",\n            message: \"Please enter a search query\"\n        });\n        return;\n    }\n\n    selectors.loader.classList.remove(\"hidden\");\n    \n    try {\n        \n        const data = await getPosts(query, page);\n        totalHits = data.totalHits;\n\n        if (totalHits === 0) {\n            iziToast.warning({\n                title: \"No result\",\n                message: \"Sorry, there are no images matching your search query. Please try again!\"\n            });\n            selectors.loadMoreBtn.classList.add(\"hidden\");\n        }\n\n        const markup = postsTemplate(data.hits);\n        selectors.postsGallery.insertAdjacentHTML(\"beforeend\", markup);\n        lightbox.refresh();\n\n        if (totalHits > 15) {\n            selectors.loadMoreBtn.classList.remove(\"hidden\");\n        }\n\n    } catch (error) {\n        iziToast.error({\n            title: \"Error\",\n            message: `Something went wrong. ${error.message}`\n        })\n    } finally {\n        selectors.loader.classList.add(\"hidden\");\n        event.target.reset();\n    }\n}\n\nselectors.form.addEventListener(\"submit\", handleSubmit);\n\n\n\n\nasync function handleLoadMore() {\n    \n    page += 1;\n    selectors.loader.classList.remove(\"hidden\");\n\n\n    try {\n        const data = await getPosts(query, page);\n        const markup = postsTemplate(data.hits);\n        selectors.postsGallery.insertAdjacentHTML(\"beforeend\", markup);\n        lightbox.refresh();\n\n        const item = document.querySelector(\".gallery-item\");\n        const itemHeight = item.getBoundingClientRect().height;\n        window.scrollBy({\n            left: 0,\n            top: itemHeight * 2,\n            behavior: \"smooth\"\n        })\n\n        totalHits = data.totalHits;\n\n        if (totalHits <= page * 15) {\n            selectors.loadMoreBtn.classList.add(\"hidden\");\n            iziToast.info({\n                title: 'End of results',\n                message: \"We're sorry, but you've reached the end of search results.\",\n            });\n        }\n\n    } catch (error) {\n        iziToast.error({\n            title: \"Error\",\n            message: `Something went wrong. ${error.message}`\n        });\n    } finally {\n        selectors.loader.classList.add('hidden');\n    }\n\n}\n\nselectors.loadMoreBtn.addEventListener(\"click\", handleLoadMore);\n\n"],"names":["getPosts","searchQuery","page","perPage","BASE_URL","API_KEY","url","axios","error","iziToast","createMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","postsTemplate","arr","lightbox","SimpleLightbox","selectors","totalHits","query","handleSubmit","event","data","markup","handleLoadMore","itemHeight"],"mappings":"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"}